#!/bin/bash

# check commit message
# - not empty
function checkEmpty() {
  local VALUE=$(echo "$1" | tr "] " "\n")

  if [[ "${#VALUE[0]}" -lt 2 ]]
  then
    echo "Prefix is empty"
    echo "value = $VALUE"
    exit 1
  fi

  echo ${VALUE[#]}
  if [[ -z "${VALUE[1]}" ]]
  then
    echo "Commit message is empty"
    echo "value = $VALUE"
    exit 1
  fi
}

# - max length
function checkMaxLength() {
  local MAX_LENGTH="$1"
  local VALUE="$2"

  if [[ "${#VALUE}" -gt "$MAX_LENGTH" ]]
  then
    echo "Commit message is longer than the maximum length"
    echo "value = $VALUE"
    exit 1
  fi
}

# variables
CHUNKS_MESSAGE=$(cat "$1")

# checking
checkEmpty "$CHUNKS_MESSAGE"
checkMaxLength 72 "$CHUNKS_MESSAGE"
